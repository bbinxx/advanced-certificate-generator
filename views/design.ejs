<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificate </title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.3/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans:wght@400;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link href="main/css/style.css" rel="stylesheet">
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>

    <script src="https://unpkg.com/downloadjs@1.4.7"></script>
    <script type="module" src="main/js/main.js"></script>
</head>
<body>
    <div class="container">
        <div class="root">
            <div class="maincontent">
                <div class="certificate-wrapper" id="mainContent">
                    <div class="certificate-container" id="certificateContainer">
                        <div id="fabricContainer" style="width: 100%; height: 100%;">
                            <canvas id="fabricCanvas" width="800" height="600"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="header">
                <!-- Header -->
                <div class="header-container">
                 <ul class="header-menu">
                    <button id="toggleGridButton">Toggle Grid</button>
                    <button id="saveAsPDFButton">Save as PDF</button>
                    <!-- <button id="setCanvasSizeButton">Set Canvas Size</button> -->
                    <button id="exportButton">Save as Image</button>
                    <button id="logoutButton" onclick="window.location.href = '/logout'">Logout</button>

                    <!-- <button id="saveButton">Export Design</button>
                    <input type="file" id="importInput" accept=".json" style="display: none;">
                    <button id="importButton">Import Design</button> -->
                      
                </ul> 
                </div>
            </div>
            <div class="formatting"></div>
            <div class="sidebar">
                <ul>
                    <li>
                        <i class="fas fa-layer-group"></i>
                        <div class="floating-panel">
                            <div id="layerList"></div>
                        </div>
                    </li>
                    <li>
                        <i class="fas fa-plus"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <button id="addTitleButton">Add Title</button>
                                <!-- <button id="addSubtitleButton">Add Subtitle</button>
                                <button id="addRecipientNameButton">Add Recipient Name</button>
                                <button id="addAwardingOrgButton">Add Awarding Organization</button>
                                <button id="addDateButton">Add Date</button>
                                <button id="addDescriptionButton">Add Description</button>
                                <button id="addSignatureLineButton">Add Signature Line</button>
                                <button id="addSignatureNameButton">Add Signature Name</button>
                                <button id="addSignatureTitleButton">Add Signature Title</button>
                                <button id="addLogoButton">Add Logo</button>
                                <button id="addSealButton">Add Seal</button>
                                <button id="addSignatureImageButton">Add Signature Image</button>
                                <button id="addDecorativeElementButton">Add Decorative Element</button> -->
                                <!-- <button id="addQRCodeButton">Add QR Code</button>
                            <button id="addVerifyLinkButton">Add Verify Link</button> -->
                            <!-- <button id="addAuth">Add Authentication</button> -->
                                
                        </div>
                        </div>
                    </li>
                    <li>
                        <i class="fas fa-shapes"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <button id="addRectangleButton">Add Rectangle</button>
                                <button id="addCircleButton">Add Circle</button>
                                <button id="addLineButton">Add Line</button>
                            </div>
                        </div>
                    </li>
                    
                    <li>
                        <i class="fas fa-paint-brush"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <!-- <input type="color" id="bgColor" /> -->
                                <button id="setBgImageButton">Set Background Image</button>
                            </div>
                        </div>
                    </li>
                    <!-- <li>
                        <i class="fas fa-align-justify"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <button id="alignLeftButton">Left</button>
                                <button id="alignCenterButton">Center</button>
                                <button id="alignRightButton">Right</button>
                                <button id="alignTopLeftButton">Top Left</button>
                                <button id="alignTopCenterButton">Top Center</button>
                                <button id="alignTopRightButton">Top Right</button>
                                <button id="alignBottomLeftButton">Bottom Left</button>
                                <button id="alignBottomCenterButton">Bottom Center</button>
                                <button id="alignBottomRightButton">Bottom Right</button>
                                
                            </div>
                        </div>
                    </li> -->
                    <!-- <li>
                        <i class="fas fa-font"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <button id="boldButton">Bold</button>
                                <button id="italicButton">Italic</button>
                                <button id="underlineButton">Underline</button>
                                <select id="fontFamily">
                                   
                                </select>
                                <input type="color" id="textColor" />
                                <input type="number" id="fontSize" min="8" max="72" value="16" />
                            </div>
                        </div>
                    </li> -->
                   
                    <!-- <li>
                        <i class="fas fa-save"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                              
                            </div>
                        </div>
                    </li> -->
                    <li>
                        <i class="fas fa-file-csv"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <button id="uploadCSVButton">Upload CSV</button>
                            </div>
                        </div>
                    </li>
                    <li id="mapping" style="display: none;">
                        <i class="fas fa-map-marker-alt"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <div id="sidebarMappingPanel" class="sidebar-panel">
                                    <h3 class="text-lg font-bold mb-4">Field Mapping</h3>
                                    <div id="fieldMappingContainer" class="space-y-2">
                                        <!-- Mapping fields will be dynamically populated here -->
                                    </div>
                                    <!-- <div class="navigation-buttons mt-4">
                                        <button id="previousRecordButton" class="bg-gray-300 text-gray-700 px-4 py-2 rounded mr-2">Previous</button>
                                        <button id="nextRecordButton" class="bg-gray-300 text-gray-700 px-4 py-2 rounded">Next</button>
                                    </div>
                                    <button id="generateCertificatesButton" class="bg-blue-500 text-white px-4 py-2 rounded mt-4 w-full">Generate Certificates</button>
                                    <button id="closeMappingPanelButton" class="bg-gray-300 text-gray-700 px-4 py-2 rounded mt-2 w-full">Close</button> -->
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="footer">
                <!-- Footer -->

            </div>
        </div>
    </div>

    <div class="csv-upload-interface" id="csvUploadInterface" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 8px; z-index: 1000; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <h3 class="text-lg font-bold mb-4">Upload CSV File</h3>
        <div class="mb-4">
            <input type="file" id="csvFileInput" accept=".csv" class="w-full border p-2 rounded" />
        </div>
        <div class="flex justify-between">
            <button id="parseCSVButton" class="bg-blue-500 text-white px-4 py-2 rounded mr-2">Upload</button>
            <button id="closeCSVUploadInterfaceButton" class="bg-gray-300 text-gray-700 px-4 py-2 rounded">Close</button>
        </div>
        <div class="mt-4 max-h-64 overflow-auto">
            <table id="csvDataTable" class="w-full">
                <thead></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    <div class="text-format-panel">
        <button id="boldButton">Bold</button>
        <button id="italicButton">Italic</button>
        <button id="underlineButton">Underline</button>
        <select id="fontFamily">
           
        </select>
        <input type="color" id="textColor" />
        <input type="number" id="fontSize" min="8" max="72" value="16" />
    </div>
<div class="formatting">
    <button id="boldButton">Bold</button>
                                <button id="italicButton">Italic</button>
                                <button id="underlineButton">Underline</button>
                                <select id="fontFamily">
                                   
                                </select>
                                <input type="color" id="textColor" />
                                <input type="number" id="fontSize" min="8" max="72" value="16" />
</div>
    <!-- <div id="canvasSizeModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); z-index: 1000;">
        <h3>Set Canvas Size</h3>
        <label for="canvasWidth">Width:</label>
        <input type="number" id="canvasWidth" min="100" value="1122" />
        <label for="canvasHeight">Height:</label>
        <input type="number" id="canvasHeight" min="100" value="794" />
        <button id="setCanvasSizeModalButton">Set Size</button>
        <button id="hideCanvasSizeModalButton">Cancel</button>
    </div> -->

    <div id="modal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
        <!-- Draggable Modal Container -->
        <div id="draggableModal" class="bg-white rounded-lg shadow-lg w-96 relative" data-x="0" data-y="0">
          <!-- Modal Header -->
          <div class="modal-header flex justify-between items-center p-4 border-b">
            <div class="font-bold text-lg">Modal Title</div>
            <button id="closeModal" class="text-gray-600 hover:text-gray-800">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M6 18L18 6M6 6l12 12">
                </path>
              </svg>
            </button>
          </div>
          <!-- Modal Body -->
          <div class="p-4">
            <p>This is a draggable modal with a close button using Interact.js. Click anywhere outside the modal to close it.</p>
          </div>
        </div>
      </div>
</body>
</html>
