<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Certificate Layout</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.3/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans:wght@400;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>

    <script src="https://unpkg.com/downloadjs@1.4.7"></script>
    <script type="module" src="../js/main.js"></script>
</head>
<body>
    <div class="container">
        <div class="root">
            <div class="header">
                <!-- Header -->
                <div class="header-container">
                 <ul class="header-menu">
                    <!-- <button id="toggleGridButton">Toggle Grid</button> -->
                    <button id="saveAsPDFButton">Save as PDF</button>
                    <button id="setCanvasSizeButton">Set Canvas Size</button>
                    <button id="exportButton">Save as Image</button>
                    <button id="saveButton">Export Design</button>
                    <input type="file" id="importInput" accept=".json" style="display: none;">
                    <button id="importButton">Import Design</button>
                      
                </ul> 
                </div>
                <div class="template-controls">
                    <select id="templateSelector" class="px-4 py-2 border rounded-lg shadow-sm text-gray-700">
                      <option value="">Select Template</option>
                    </select>
                    <button id="saveAsTemplateButton" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg shadow-sm ml-2">
                      Save as Template
                    </button>
                  </div>
            </div>
            <div id="dynamicFormatToolbar" class="dynamic-format-toolbar hidden">
                <div id="textFormatOptions" class="format-options hidden">
                    <button id="dynBoldButton" class="format-btn"><i class="fas fa-bold"></i></button>
                    <button id="dynItalicButton" class="format-btn"><i class="fas fa-italic"></i></button>
                    <button id="dynUnderlineButton" class="format-btn"><i class="fas fa-underline"></i></button>
                    <select id="dynFontFamily" class="format-select">
                        <!-- Fonts will be populated dynamically -->
                    </select>
                    <input type="color" id="dynTextColor" class="format-color" title="Text Color"/>
                    <input type="number" id="dynFontSize" class="format-number" min="8" max="72" value="16"/>
                </div>
                <div id="shapeFormatOptions" class="format-options hidden">
                    <input type="color" id="dynShapeColor" class="format-color" title="Shape Color"/>
                    <input type="number" id="dynShapeBorderWidth" class="format-number" min="0" max="20" value="1" title="Border Width"/>
                </div>
            </div>
            <div class="maincontent">
                <div class="certificate-wrapper" id="mainContent">
                    <div class="certificate-container" id="certificateContainer">
                        <div id="fabricContainer" style="width: 100%; height: 100%;">
                            <canvas id="fabricCanvas" width="800" height="600"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="formatting">
                <button id="boldButton">Bold</button>
                                            <button id="italicButton">Italic</button>
                                            <button id="underlineButton">Underline</button>
                                            <select id="fontFamily">
                                               
                                            </select>
                                            <input type="color" id="textColor" />
                                            <input type="number" id="fontSize" min="8" max="72" value="16" />
            </div>
            <div class="sidebar">
                <ul>
                    <li>
                        <i class="fas fa-layer-group"></i>
                        <div class="floating-panel">
                            <div id="layerList"></div>
                        </div>
                    </li>
                    <li>
                        <i class="fas fa-plus"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <button id="addTitleButton">Add Title</button>
                                <button id="addSubtitleButton">Add Subtitle</button>
                                <button id="addRecipientNameButton">Add Recipient Name</button>
                                <button id="addAwardingOrgButton">Add Awarding Organization</button>
                                <button id="addDateButton">Add Date</button>
                                <button id="addDescriptionButton">Add Description</button>
                                <button id="addSignatureLineButton">Add Signature Line</button>
                                <button id="addSignatureNameButton">Add Signature Name</button>
                                <button id="addSignatureTitleButton">Add Signature Title</button>
                                <button id="addLogoButton">Add Logo</button>
                                <button id="addSealButton">Add Seal</button>
                                <button id="addSignatureImageButton">Add Signature Image</button>
                                <button id="addDecorativeElementButton">Add Decorative Element</button>
                                <!-- <button id="addQRCodeButton">Add QR Code</button>
                            <button id="addVerifyLinkButton">Add Verify Link</button> -->
                            
                                
                        </div>
                        </div>
                    </li>
                    <li>
                        <i class="fas fa-shapes"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <button id="addRectangleButton">Add Rectangle</button>
                                <button id="addCircleButton">Add Circle</button>
                                <button id="addLineButton">Add Line</button>
                            </div>
                        </div>
                    </li>
                    
                    <li>
                        <i class="fas fa-paint-brush"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <input type="color" id="bgColor" />
                                <button id="setBgImageButton">Set Background Image</button>
                            </div>
                        </div>
                    </li>
                    <li>
                        <i class="fas fa-lock"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                
                                <button id="authDetails">Verification Details</button>
                                <button id="addAuth">Add Authentication</button>
                            </div>
                        </div>
                    </li>
                    <li>
                        <i class="fas fa-align-justify"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <button id="alignLeftButton">Left</button>
                                <button id="alignCenterButton">Center</button>
                                <button id="alignRightButton">Right</button>
                                <button id="alignTopLeftButton">Top Left</button>
                                <button id="alignTopCenterButton">Top Center</button>
                                <button id="alignTopRightButton">Top Right</button>
                                <button id="alignBottomLeftButton">Bottom Left</button>
                                <button id="alignBottomCenterButton">Bottom Center</button>
                                <button id="alignBottomRightButton">Bottom Right</button>
                                
                            </div>
                        </div>
                    </li>
                    <!-- <li>
                        <i class="fas fa-font"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <button id="boldButton">Bold</button>
                                <button id="italicButton">Italic</button>
                                <button id="underlineButton">Underline</button>
                                <select id="fontFamily">
                                   
                                </select>
                                <input type="color" id="textColor" />
                                <input type="number" id="fontSize" min="8" max="72" value="16" />
                            </div>
                        </div>
                    </li> -->
                   
                    <!-- <li>
                        <i class="fas fa-save"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                              
                            </div>
                        </div>
                    </li> -->
                    <li>
                        <i class="fas fa-file-csv"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <button id="uploadCSVButton">Upload CSV</button>
                            </div>
                        </div>
                        
                    </li>
                    <li id="mapping">
                        <i class="fas fa-map-marker-alt"></i>
                        <div class="floating-panel">
                            <div class="floating-panel-container">
                                <button id="csvPanel">Open panel</button>
                            <!-- <div id="sidebarMappingPanel" class="sidebar-panel">
                                <div id="fieldMappingContainer"></div>
                               
                                <div class="navigation-buttons">
                                    <button id="previousRecordButton">Previous</button>
                                    <button id="nextRecordButton">Next</button>
                                </div>
                                <button id="generateCertificatesButton">Generate Certificates</button>
                                <button id="closeMappingPanelButton">Close</button>
                            </div> -->
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="footer">
                <!-- Footer -->

            </div>
        </div>
    </div>

    <div class="csv-upload-interface" id="csvUploadInterface" style="display: none;">
        <h3>Upload CSV File</h3>
        <input type="file" id="csvFileInput" accept=".csv" />
        <button id="parseCSVButton">Upload</button>
        <button id="closeCSVUploadInterfaceButton">Close</button>
        <table class="csv-data-table" id="csvDataTable"></table>
    </div>
    <div class="text-format-panel">
        <button id="boldButton">Bold</button>
        <button id="italicButton">Italic</button>
        <button id="underlineButton">Underline</button>
        <select id="fontFamily">
           
        </select>
        <input type="color" id="textColor" />
        <input type="number" id="fontSize" min="8" max="72" value="16" />
    </div>

    <div id="canvasSizeModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); z-index: 1000;">
        <h3>Set Canvas Size</h3>
        <label for="canvasWidth">Width:</label>
        <input type="number" id="canvasWidth" min="100" value="1122" />
        <label for="canvasHeight">Height:</label>
        <input type="number" id="canvasHeight" min="100" value="794" />
        <button id="setCanvasSizeModalButton">Set Size</button>
        <button id="hideCanvasSizeModalButton">Cancel</button>
    </div>

    <div id="modal" class="fixed inset-0 flex items-center justify-center" style="display: none;">
        <!-- Draggable Modal Container -->
        <div id="draggableModal" class="bg-white rounded-lg shadow-lg w-full max-w-lg relative p-6 max-h-[80vh] overflow-y-auto" data-x="0" data-y="0"
        style="overflow-x: auto;
    height: 70vh;">
          <!-- Modal Header -->
          <div class="modal-header flex justify-between items-center border-b pb-4">
            <div class="font-bold text-lg text-black">Modal Title</div>
            <button id="closeModal" class="text-gray-600 hover:text-gray-800 focus:outline-none">
              ✖
            </button>
          </div>
          <!-- Modal Body -->
          <div class="p-4 text-black">
            <p>Modal Content Goes Here</p>
            <p>Additional Content...</p>
            <p>Keep adding content to test overflow.</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
          </div>
        </div>
      </div>
      
      <div id="template-gallery" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6">
        <!-- Templates will be loaded here -->
      </div>
      
</body>
</html>
